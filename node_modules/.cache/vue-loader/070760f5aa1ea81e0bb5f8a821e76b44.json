{"remainingRequest":"/Users/isaac/Documents/workSpace/hospital-web/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/isaac/Documents/workSpace/hospital-web/src/views/mainPage/main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/isaac/Documents/workSpace/hospital-web/src/views/mainPage/main.vue","mtime":1627476488000},{"path":"/Users/isaac/Documents/workSpace/hospital-web/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/isaac/Documents/workSpace/hospital-web/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/isaac/Documents/workSpace/hospital-web/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhZGREb2N0b3IgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9hZGREb2N0b3IiOwppbXBvcnQgYWRkRHJ1Z3MgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9hZGREcnVncyI7CmltcG9ydCBsb2RpbmcgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9sb2RpbmciCmltcG9ydCB7IGZpbmREb2N0b3IsZmluZERydWdzLHN1Ym1pdERydWdzIH0gZnJvbSAnLi4vLi4vYXBpL21haW5BcGknCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibWFpbiIsCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBkb2N0b3JMaXN0OlsnQScsJ0InLCdDJywnRCcsJ0UnLCdGJywnRycsJ0gnLCdJJywnSicsJ0snLCdMJywnTScsJ04nLCdPJywnUCcsJ1EnLCdSJywnUycsJ1QnLCdVJywnVicsJ1cnLCdYJywnWScsJ1onXSwKICAgICAgZHJ1Z251bUxpc3Q6WzEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyXSwKICAgICAgYWN0aXZlTmFtZTogJzEnLAogICAgICBhY3RpdmVMZXR0ZXI6JycsCiAgICAgIGRydWdudW1BY3RpdmU6MSwvL+a3u+WKoOeahOiNr+WTgeaVsOmHjwogICAgICBkb2N0b3JPcGVuOmZhbHNlLAogICAgICBub3dEb2N0b3I6J+adjuaYpeeniycsCiAgICAgIHNob3dMb2Rpbmc6ZmFsc2UsCiAgICAgIGRydWdGb3JtOnsKICAgICAgICBkcnVnbmFtZTonJwogICAgICB9LAogICAgICByZXN0YXVyYW50czogW10sCiAgICAgIGZpbmREb2N0b3JMaXN0OltdLAogICAgICBhbGxBbm90aGVyRHJ1Z3M6W10sCiAgICAgIHRvdWNoRG9jdG9yTm9kZTonJywKICAgICAgdG91Y2hEcnVnc05vZGU6JycsCiAgICB9CiAgfSwKICBjb21wb25lbnRzOnthZGREb2N0b3IsYWRkRHJ1Z3MsbG9kaW5nfSwKICBtZXRob2RzOnsKICAgIC8v6YCa6L+H6aaW5a2X5q+N5p+l6K+i5Yy755Sf5YiX6KGoCiAgICBhc3luYyBmaW5kRG9jdG9yKG5vZGUpewogICAgICB0aGlzLnNob3dMb2RpbmcgPSB0cnVlCiAgICAgIHRoaXMuYWN0aXZlTGV0dGVyID0gbm9kZTsKICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZpbmREb2N0b3Ioe2RvY3RvclBpbmd5aW5nOm5vZGV9KQogICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT09IDIwMCl7CiAgICAgICAgdGhpcy5maW5kRG9jdG9yTGlzdCA9IGRhdGEuZGF0YS5yZXN1bHQ7CiAgICAgIH1lbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGRhdGEuZGF0YS5tc2cpCiAgICAgIH0KICAgICAgdGhpcy5zaG93TG9kaW5nID0gZmFsc2U7CiAgICB9LAogICAgYXN5bmMgb3BlbkFkZFN0YXRpc3RpY3Mobm9kZSl7CiAgICAgIHRoaXMuZG9jdG9yT3BlbiA9IHRydWU7CiAgICAgIHRoaXMudG91Y2hEb2N0b3JOb2RlID0gbm9kZTsKICAgIH0sCiAgICAvL+iNr+WTgeeahOiBlOaDs+aooeeziuaQnOe0ogogICAgYXN5bmMgcXVlcnlTZWFyY2gocXVlcnlTdHJpbmcsIGNiKSB7CiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmaW5kRHJ1Z3Moe2RydWdzUGluZ3lpbmc6cXVlcnlTdHJpbmd9KQogICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT09IDIwMCl7CiAgICAgICAgdGhpcy5hbGxBbm90aGVyRHJ1Z3MgPSBkYXRhLmRhdGEucmVzdWx0Lm1hcCgoeCkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQ6eC5pZCwKICAgICAgICAgICAgdmFsdWU6IHgubmFtZSwKICAgICAgICAgICAgYWRkcmVzczogeC5waW5neWluZywKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgICAgLy8g6LCD55SoIGNhbGxiYWNrIOi/lOWbnuW7uuiuruWIl+ihqOeahOaVsOaNrgogICAgICAgIGNiKHRoaXMuYWxsQW5vdGhlckRydWdzKTsKICAgICAgfWVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5kYXRhLm1zZykKICAgICAgfQogICAgfSwKICAgIC8v6YCJ5Lit55qE6I2v5ZOBCiAgICBoYW5kbGVTZWxlY3QoaXRlbSkgewogICAgICB0aGlzLnRvdWNoRHJ1Z3NOb2RlID0gaXRlbTsKICAgIH0sCiAgICAvL+aPkOS6pOWMu+eUn+aJgOW8gOWFt+eahOiNr+WTgQogICAgYXN5bmMgc3VibWl0RHJ1Z3MoKXsKICAgICAgY29uc3QgbG9hZGluZyA9IHRoaXMuJGxvYWRpbmcoewogICAgICAgIGxvY2s6IHRydWUsCiAgICAgICAgdGV4dDogJ0xvYWRpbmcnLAogICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIDAuNyknCiAgICAgIH0pOwogICAgICBpZiAodGhpcy5kcnVnRm9ybS5kcnVnbmFtZSA9PSAnJykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+WFiOWhq+WGmeiNr+WTgScpCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1Ym1pdERydWdzKHsKICAgICAgICB1c2VySWQ6MSwKICAgICAgICBkb2N0b3JJZDp0aGlzLnRvdWNoRG9jdG9yTm9kZS5pZCwKICAgICAgICBkcnVnc0lkOnRoaXMudG91Y2hEcnVnc05vZGUuaWQsCiAgICAgICAgbnVtOnRoaXMuZHJ1Z251bUFjdGl2ZSwKICAgICAgICBkcnVnc05hbWU6dGhpcy50b3VjaERydWdzTm9kZS52YWx1ZSwKICAgICAgfSkKICAgICAgaWYgKGRhdGEuZGF0YS5jb2RlID09PSAyMDApewogICAgICAgIHRoaXMuZG9jdG9yT3BlbiA9IGZhbHNlOwogICAgICAgIHRoaXMuZHJ1Z0Zvcm0uZHJ1Z25hbWUgPSAnJzsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoZGF0YS5kYXRhLm1zZykKICAgICAgfWVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5kYXRhLm1zZykKICAgICAgfQogICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICB9LAogICAgLy/ot7PovazliLDmiJHliLDnu5/orqHpobXpnaIKICAgIHRvU3RhdHNQYWdlKCl7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc3RhdHMnKQogICAgfQogIH0KfQo="},{"version":3,"sources":["main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.vue","sourceRoot":"src/views/mainPage","sourcesContent":["<template>\n  <div id=\"main\">\n    <div class=\"abcout\">\n      <span class=\"letterout\" :class=\"{'activeLetter':node == activeLetter}\" @click=\"findDoctor(node)\" v-for=\"node in doctorList\" :key=\"node.id\">{{node}}</span>\n    </div>\n\n    <div class=\"doctorout\">\n      <div class=\"doctorlist\" v-for=\"node in findDoctorList\" :key=\"node.name\" @click=\"openAddStatistics(node)\">\n        <span>{{node.name}}</span>\n        <i class=\"el-icon-s-help\"></i>\n      </div>\n      <div class=\"nullpage\" v-show=\"findDoctorList.length === 0\"><img src=\"../../assets/img/null.png\" alt=\"\"></div>\n      <loding v-show=\"showLoding\"></loding>\n    </div>\n\n    <div class=\"addoption\">\n      <el-button @click=\"toStatsPage\" class=\"ststsbtn\" type=\"success\" round>查看统计</el-button>\n      <addDoctor></addDoctor>\n      <addDrugs></addDrugs>\n    </div>\n\n    <el-dialog title=\"增加药品\" :visible.sync=\"doctorOpen\">\n      <el-form :model=\"drugForm\">\n        <el-form-item label=\"当前医生 : \">\n          <span class=\"nowdoctor\">{{touchDoctorNode.name}}</span>\n        </el-form-item>\n        <el-form-item label=\"药品名称 : \">\n          <el-autocomplete\n              popper-class=\"drugin\"\n              class=\"inline-input drugin\"\n              v-model=\"drugForm.drugname\"\n              :trigger-on-focus=\"false\"\n              :fetch-suggestions=\"querySearch\"\n              placeholder=\"请输入药品首字母缩写\"\n              @select=\"handleSelect\"\n          ></el-autocomplete>\n        </el-form-item>\n        <el-form-item label=\"药品数量 : \">\n          <span class=\"drugnum\" @click=\"drugnumActive = node\" :class=\"{'drugnumactive':node == drugnumActive}\" v-for=\"node in drugnumList\" :key=\"node.id\">{{node}}</span>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" @click=\"doctorOpen = false\">取 消</el-button>\n        <el-button size=\"small\"  type=\"success\" @click=\"submitDrugs\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport addDoctor from \"../../components/addDoctor\";\nimport addDrugs from \"../../components/addDrugs\";\nimport loding from \"../../components/loding\"\nimport { findDoctor,findDrugs,submitDrugs } from '../../api/mainApi'\nexport default {\n  name: \"main\",\n  data(){\n    return{\n      doctorList:['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'],\n      drugnumList:[1,2,3,4,5,6,7,8,9,10,11,12],\n      activeName: '1',\n      activeLetter:'',\n      drugnumActive:1,//添加的药品数量\n      doctorOpen:false,\n      nowDoctor:'李春秋',\n      showLoding:false,\n      drugForm:{\n        drugname:''\n      },\n      restaurants: [],\n      findDoctorList:[],\n      allAnotherDrugs:[],\n      touchDoctorNode:'',\n      touchDrugsNode:'',\n    }\n  },\n  components:{addDoctor,addDrugs,loding},\n  methods:{\n    //通过首字母查询医生列表\n    async findDoctor(node){\n      this.showLoding = true\n      this.activeLetter = node;\n      const data = await findDoctor({doctorPingying:node})\n      if (data.data.code === 200){\n        this.findDoctorList = data.data.result;\n      }else {\n        this.$message.error(data.data.msg)\n      }\n      this.showLoding = false;\n    },\n    async openAddStatistics(node){\n      this.doctorOpen = true;\n      this.touchDoctorNode = node;\n    },\n    //药品的联想模糊搜索\n    async querySearch(queryString, cb) {\n      const data = await findDrugs({drugsPingying:queryString})\n      if (data.data.code === 200){\n        this.allAnotherDrugs = data.data.result.map((x) => {\n          return {\n            id:x.id,\n            value: x.name,\n            address: x.pingying,\n          };\n        });\n        // 调用 callback 返回建议列表的数据\n        cb(this.allAnotherDrugs);\n      }else {\n        this.$message.error(data.data.msg)\n      }\n    },\n    //选中的药品\n    handleSelect(item) {\n      this.touchDrugsNode = item;\n    },\n    //提交医生所开具的药品\n    async submitDrugs(){\n      const loading = this.$loading({\n        lock: true,\n        text: 'Loading',\n        spinner: 'el-icon-loading',\n        background: 'rgba(0, 0, 0, 0.7)'\n      });\n      if (this.drugForm.drugname == '') {\n        this.$message.error('请先填写药品')\n        return\n      }\n      const data = await submitDrugs({\n        userId:1,\n        doctorId:this.touchDoctorNode.id,\n        drugsId:this.touchDrugsNode.id,\n        num:this.drugnumActive,\n        drugsName:this.touchDrugsNode.value,\n      })\n      if (data.data.code === 200){\n        this.doctorOpen = false;\n        this.drugForm.drugname = '';\n        this.$message.success(data.data.msg)\n      }else {\n        this.$message.error(data.data.msg)\n      }\n      loading.close();\n    },\n    //跳转到我到统计页面\n    toStatsPage(){\n      this.$router.push('/stats')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  #main{\n    width: 100%;\n    height: 100vh;\n    background-image: url(\"../../assets/img/mainbg.jpeg\");\n    background-position: center;\n    background-size: 100%;\n    .el-input__inner{width: 400px;}\n    .drugnum{\n      padding: 5px 10px;\n      background-color: #f2f2f2;\n      color: #999999;\n      font-size: 16px;\n      border-radius: 3px;\n      margin-right: 8px;\n      cursor: pointer;\n    }\n    .drugnum:hover{\n      color: #ffffff;\n      background-color: #42b983;\n    }\n    .drugnumactive{\n      color: #ffffff;\n      background-color: #42b983;\n    }\n\n    .abcout{\n      padding: 20px;\n      text-align: center;\n      min-height: 80px;\n      width: 80%;\n      margin: 0 auto;\n      .letterout{\n        vertical-align: bottom;\n        color: #ffffff;\n        font-size: 36px;\n        font-weight: bold;\n        cursor: pointer;\n        display: inline-block;\n        width: 80px;\n        height: 80px;\n        line-height: 80px;\n        text-align: center;\n      }\n      .letterout:hover{\n        font-size: 62px;\n        color: #42b983;\n      }\n      .activeLetter{\n        font-size: 62px;\n        color: #42b983;\n      }\n    }\n    .doctorout{\n      padding: 20px;\n      background-color: #ffffff;\n      border-radius: 20px;\n      min-height: 400px;\n      max-height: 600px;\n      overflow: auto;\n      width: 80%;\n      margin: 0 auto;\n      position: relative;\n      .nullpage{\n        text-align: center;\n      }\n      .doctorlist{\n        width: 177px;\n        text-align: center;\n        cursor: pointer;\n        height: 50px;\n        padding: 0 10px;\n        font-size: 28px;\n        line-height: 50px;\n        background-color: #cccccc;\n        color: #999999;\n        border-radius: 5px;\n        display: inline-block;\n        vertical-align: top;\n        margin-right: 20px;\n        margin-top: 20px;\n      }\n      .doctorlist:hover{\n        background-color: #42b983;\n        color: #ffffff;\n      }\n    }\n    .addoption{\n      position: absolute;\n      bottom: 20px;\n      left: 3%;\n      .ststsbtn{margin-right: 10px}\n    }\n  }\n</style>"]}]}